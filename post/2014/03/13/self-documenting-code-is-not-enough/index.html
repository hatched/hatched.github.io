<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <title>Self documenting code is not enough &middot; From An Egg</title>
  
  <link rel="icon" type="image/png" alt="author's image" href="/img/me.png">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#cc181e">
  <meta name="generator" content="Hugo 0.17" />
  <link rel="canonical" href="https://fromanegg.com/post/2014/03/13/self-documenting-code-is-not-enough"/>
  <link rel="stylesheet" href="/css/normalize-min.css">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/manni.css">
  <link href="" rel="alternate" type="application/rss+xml" title="From An Egg" />
</head>
<div class="top-bar"></div>

<body>
  <nav>
  <img src="/images/me.png"></img>
  <h1>Jeff Pihach</h1>
  <label for="menu-toggle" class="icon-menu">Menu</label>
  <input type="checkbox" id="menu-toggle"/>
  <div class="nav-wrapper">
    <ul>
      <li class=""><a href="/" class="icon-home">Home</a></li>
      <li class=""><a href="/about" class="icon-help">About</a></li>
      <li class=""><a href="/posts" class="icon-box">Posts</a></li>
      <li class=""><a href="/projects" class="icon-cubes">Projects</a></li>
      <li class="">
        <label for="tags-toggle">
          <span class="icon-tag">Tags</span>
          <span class="icon-down-dir arrow"></span>
        </label>
        <input type="checkbox" id="tags-toggle"/>
        <ul class="tag-list">
          
          
            <li><a href="/tags/android">android (1)</a></li>
          
            <li><a href="/tags/book-review">book-review (1)</a></li>
          
            <li><a href="/tags/cordova">cordova (2)</a></li>
          
            <li><a href="/tags/css">css (6)</a></li>
          
            <li><a href="/tags/development">development (7)</a></li>
          
            <li><a href="/tags/go">go (1)</a></li>
          
            <li><a href="/tags/hatched-links">hatched-links (5)</a></li>
          
            <li><a href="/tags/javascript">javascript (16)</a></li>
          
            <li><a href="/tags/juju">juju (17)</a></li>
          
            <li><a href="/tags/juju-gui">juju-gui (11)</a></li>
          
            <li><a href="/tags/linux">linux (1)</a></li>
          
            <li><a href="/tags/node.js">node.js (1)</a></li>
          
            <li><a href="/tags/ops">ops (2)</a></li>
          
            <li><a href="/tags/osx">osx (1)</a></li>
          
            <li><a href="/tags/phonegap">phonegap (2)</a></li>
          
            <li><a href="/tags/testing">testing (1)</a></li>
          
            <li><a href="/tags/ubuntu">ubuntu (2)</a></li>
          
            <li><a href="/tags/video">video (2)</a></li>
          
            <li><a href="/tags/yui">yui (11)</a></li>
          
        </ul>
      </li>
      <li><a href="/rss" class="icon-rss">RSS</a></li>
    </ul>
    <hr></hr>
    <h3>Social</h3>
    <ul class="social-list">
      <li><a href="https://github.com/hatched" class="icon-github" target="_blank">GitHub</a></li>
      <li><a href="https://twitter.com/fromanegg" class="icon-twitter" target="_blank">Twitter</a></li>
      <li><a href="https://www.youtube.com/channel/UCq2MDZ8IWAV0Jyp6FuwoJXA" class="icon-youtube-play" target="_blank">YouTube</a></li>
      <li><a href="https://plus.google.com/+JeffPihach" class="icon-google" target="_blank">Google</a></li>
      <li><a href="http://stackexchange.com/users/3378894" class="icon-stackoverflow" target="_blank">StackExchange</a></li>
    </ul>
  </div>
</nav>

  <section class="article-list">
  <article>
    <header>
      <h1><a href="https://fromanegg.com/post/2014/03/13/self-documenting-code-is-not-enough">Self documenting code is not enough</a></h1>
      
        <time datetime="2014-03-13 09:22:00 -0600 CST">13 March 2014</time>
      
    </header>
    <p>Our industry moves so fast that just to stay on the curve, let alone ahead of it, you need to spend a considerable amount of time reading other peoples code. Whether that be in code reviews, gists, or open source projects, you can glean a lot of invaluable information about new technologies, protocols, and techniques.</p>

<p>As an industry as a whole we need to understand this and write all code, even that which at first is not meant for public consumption, as <a href="https://en.wikipedia.org/wiki/Self-documenting_code">self-documenting code</a> with comments which detail, to anyone reading it, the why the code is doing what it’s doing.</p>

<p>Self-documenting code is code which follows commonly accepted style conventions, and uses descriptive variable, and function names. As an example, self-documenting code turns this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="kd">function</span> <span class="nx">gd</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">y</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>

<p>Into:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="kd">function</span> <span class="nx">getDifference</span><span class="p">(</span><span class="nx">point1</span><span class="p">,</span> <span class="nx">point2</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>

<p>It’s much easier to understand what the second function is doing at a glance vs the first.</p>

<p>This function is so trivial many will stop here and continue on. But trivial scripts have a way of becoming more, whether they grow into a project of their own or are copy/pasted into much larger projects where their use may not be as clear.</p>

<p>Lets assume for a moment that this function was copy &amp; pasted into a larger projects utility class. Wouldn’t it be nice if it would automatically be added to the API docs?</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="cm">/**</span>
<span class="cm">  Calculate the difference between the x and y coords of two points.</span>

<span class="cm">  @method getDifference</span>
<span class="cm">  @param {Object} point1 The first point to compare.</span>
<span class="cm">  @param {Object} point2 The second point to compare.</span>
<span class="cm">  @return {Array} The difference between the two points in the format [x, y]</span>
<span class="cm">*/</span>
<span class="kd">function</span> <span class="nx">getDifference</span><span class="p">(</span><span class="nx">point1</span><span class="p">,</span> <span class="nx">point2</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>

<p>This function can now be copy and pasted into any project without any ambiguity about it’s functionality and will automatically be included in the API documentation.</p>

<p>To illustrate the importance of inline comments even with self documenting code. Take the following method from the <a href="https://github.com/juju/juju-gui">Juju GUI source</a>.</p>

<p>The Juju GUI has just over 65,000 lines of javascript excluding dependencies and growing fast every day. With so many developers writing code this fast it would be very difficult to understand why things were done the way they were done without the additional 17,000 lines of api comment blocks and inline documentation.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="nx">exportYAML</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">exportDeployer</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">exportData</span> <span class="o">=</span> <span class="nx">jsyaml</span><span class="p">.</span><span class="nx">dump</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">exportBlob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Blob</span><span class="p">([</span><span class="nx">exportData</span><span class="p">],</span>
             <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text/plain;charset=utf-8&#39;</span><span class="p">});</span>
  <span class="nx">saveAs</span><span class="p">(</span><span class="nx">exportBlob</span><span class="p">,</span> <span class="s1">&#39;export.yaml&#39;</span><span class="p">);</span>
<span class="p">},</span>
</code></pre></div>

<p>Using only self-documenting code you would probably be able to figure out that this function extracts some data from a database, converts it into yaml, then saves the blob to disk. Unfortunately this would have taken you at least 4x longer to parse because it doesn’t have any comments. You would also be missing some very important information from a previous bug fix. Now here it is with it’s comments:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="cm">/**</span>
<span class="cm">  Export the YAML for this environment.</span>

<span class="cm">  @method exportYAML</span>
<span class="cm">*/</span>
<span class="nx">exportYAML</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">exportDeployer</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">exportData</span> <span class="o">=</span> <span class="nx">jsyaml</span><span class="p">.</span><span class="nx">dump</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="c1">// In order to support Safari 7 the type of this blob needs</span>
  <span class="c1">// to be text/plain instead of it&#39;s actual type of application/yaml.</span>
  <span class="kd">var</span> <span class="nx">exportBlob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Blob</span><span class="p">([</span><span class="nx">exportData</span><span class="p">],</span>
      <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text/plain;charset=utf-8&#39;</span><span class="p">});</span>
  <span class="nx">saveAs</span><span class="p">(</span><span class="nx">exportBlob</span><span class="p">,</span> <span class="s1">&#39;export.yaml&#39;</span><span class="p">);</span>
<span class="p">},</span>
</code></pre></div>

<p>Without even reading the code you now know what the purpose of this method is which will dramatically reduce time when debugging or adding more features. More importantly however, the why of some of the code is outlined for future-you or another developer who may end up here. Without the comment regarding Safari 7 they very likely could have changed the mime type to application/yaml and introduced a difficult to find bug.</p>

<p>Although these examples were simple I hope I have illustrated the importance of adding comments to your self-documenting code to aid not only future-you but also any other developer who may come by and learn from your work. Thanks for reading! What commenting techniques do you use? Comment below or mention me on twitter <a href="https://twitter.com/fromanegg">@fromanegg</a>.</p>

  </article>
</section>

  <section class="article-list tags-list">
  <article>
    
    <ul class="icon-tag">
      
        <li><a href="/tags/development">development</a></li>
      
    </ul>
    
  </article>
</section>

  
    <div id="disqus_thread"></div>
<script>
    

    var disqus_config = function () {
        
          var identifier = "/post/79462590516/self-documenting-code-is-not-enough";
          this.page.url = this.page.identifier = 'http://fromanegg.com/post/' + identifier.split('/')[2];
        
    };
    (function() {
        var d = document, s = d.createElement('script');
        s.async = true;
        s.src = '//fromanegg.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28934249-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
