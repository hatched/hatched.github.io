<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
      <title>From An Egg</title>
      <meta name="twitter:title" content="From An Egg" />
      <meta property="og:title" content="From An Egg" />
    
    <link rel="icon" type="image/png" alt="author's image" href="/images/me.png">
    
      <meta name="description" itemprop="description" content="Jeff Pihach on all things programming.">
    

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@fromanegg" />
    <meta name="twitter:image" content="https://fromanegg.com/images/me.png" />

    <meta property="og:url" content="https://fromanegg.com/" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://fromanegg.com/images/me.png" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#cc181e">
    <meta name="generator" content="Hugo 0.62.1" />
    <link rel="canonical" href="https://fromanegg.com/"/>
    <link rel="stylesheet" href="/css/normalize-min.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/manni.css">
    <link href="/rss" rel="alternate" type="application/rss+xml" title="From An Egg" />
  </head>
  <body>
    <div class="top-bar"></div>

  <nav>
  <img src="/images/me.png"></img>
  <h1 itemprop="author">Jeff Pihach</h1>
  <label for="menu-toggle" class="icon-menu">Menu</label>
  <input type="checkbox" id="menu-toggle"/>
  <div class="nav-wrapper">
    <ul>
      <li class=" active "><a href="/" class="icon-home">Home</a></li>
      <li class=""><a rel="author" href="/about" class="icon-help">About</a></li>
      <li class=""><a href="/posts" class="icon-box">Posts</a></li>
      <li class=""><a href="/projects" class="icon-cubes">Projects</a></li>
      <li class="">
        <label for="tags-toggle">
          <span class="icon-tag">Tags</span>
          <span class="icon-down-dir arrow"></span>
        </label>
        <input type="checkbox" id="tags-toggle"/>
        <ul class="tag-list">
          
          
            <li><a href="/tags/android">android</a></li>
          
            <li><a href="/tags/book-review">book-review</a></li>
          
            <li><a href="/tags/cordova">cordova</a></li>
          
            <li><a href="/tags/css">css</a></li>
          
            <li><a href="/tags/development">development</a></li>
          
            <li><a href="/tags/go">go</a></li>
          
            <li><a href="/tags/hatched-links">hatched-links</a></li>
          
            <li><a href="/tags/html">html</a></li>
          
            <li><a href="/tags/javascript">javascript</a></li>
          
            <li><a href="/tags/juju">juju</a></li>
          
            <li><a href="/tags/juju-gui">juju-gui</a></li>
          
            <li><a href="/tags/linux">linux</a></li>
          
            <li><a href="/tags/node.js">node.js</a></li>
          
            <li><a href="/tags/ops">ops</a></li>
          
            <li><a href="/tags/osx">osx</a></li>
          
            <li><a href="/tags/phonegap">phonegap</a></li>
          
            <li><a href="/tags/python">python</a></li>
          
            <li><a href="/tags/react">react</a></li>
          
            <li><a href="/tags/testing">testing</a></li>
          
            <li><a href="/tags/ubuntu">ubuntu</a></li>
          
            <li><a href="/tags/video">video</a></li>
          
            <li><a href="/tags/yui">yui</a></li>
          
        </ul>
      </li>
      <li><a href="https://fromanegg.com/rss.xml" class="icon-rss">RSS</a></li>
    </ul>
    <hr></hr>
    <h3>Social</h3>
    <ul class="social-list">
      <li><a href="https://github.com/hatched" class="icon-github" target="_blank">GitHub</a></li>
      <li><a href="https://twitter.com/fromanegg" class="icon-twitter" target="_blank">Twitter</a></li>
      <li><a href="https://www.youtube.com/channel/UCq2MDZ8IWAV0Jyp6FuwoJXA" class="icon-youtube-play" target="_blank">YouTube</a></li>
      <li><a href="http://stackexchange.com/users/3378894" class="icon-stackoverflow" target="_blank">StackExchange</a></li>
    </ul>
  </div>
</nav>

  
    <section class="article-list">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1><a href="https://fromanegg.com/post/2020/01/01/testing-your-user-contract/" itemprop="url">Testing your user contract</a></h1>
      
        <time pubdate content="2020-01-01 18:40:00 -0600 CST" datetime="2020-01-01 18:40:00 -0600 CST">1 January 2020</time>
      
    </header>
    <p>Whenever you write any code that is to be consumed by another, whether it be a library or some UI element, that consumer expects it to work in a certain way every time they interact with it. All good developers would agree and that’s why we also write tests that either break our code up into chunks and test that each chunk works as expected, unit tests, or test the entire lifecycle, end to end tests.</p>
<p>Anyone who has written unit tests for long enough knows that they are tedious to keep in sync with refactors and often end up taking a disproportionate amount of time compared to the time it took to write the functional code. I propose that that we focus less on unit tests and replace them with what I’m calling the <strong>user contract</strong> of your code.</p>
<h4 id="what-is-a-user-contract">What is a user contract?</h4>
<p>The consumer expects that when they perform action X, they receive outcome Y. Typically they are not concerned about how X became Y just that it does so reliably. This is what I’m calling the <strong>user contract</strong>. If we as the authors of the code take the same view from a testing perspective, it allows us to write simpler tests and gives us the ability to refactor how a library or UI component works without having to update our tests, dramatically speeding up refactoring.</p>
<p>While these examples are written in Javascript the same techniques apply to all languages.</p>
<h4 id="library-example">Library example</h4>
<p>Starting with a simple library that another developer may be using&hellip;</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">export</span> <span class="nx">async</span> <span class="kd">function</span> <span class="nx">fetchUserList</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">userList</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">_queryDBForUserList</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">await</span> <span class="nx">_formatUserList</span><span class="p">(</span><span class="nx">userList</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">_queryDBForUserList</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Fetch content from the database.
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">function</span> <span class="nx">_formatuserList</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Reformat the data as returned from the database.
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>A consumer of this API would have a couple expectations:</p>
<ul>
<li>That function is asynchronous.</li>
<li>It returns a user list in a specific structure.</li>
</ul>
<p>These expectations then outline what your tests are:</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;fetchUserList&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;does not block&#39;</span><span class="p">)</span><span class="p">;</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;returns in the correct format&#39;</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>This will look strikingly similar to Test Driven Development. You should also note that we don’t test any method that wasn’t exported, nor do we export methods simply for testing purposes.</p>
<p>To aid the user in understanding what this contract is you can outline it in the docblock for the exported function. This way it can be used to generate the documentation for your library and help outline what your test structure is.</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="cm">/**
</span><span class="cm">  Returns a formatted user list.
</span><span class="cm">  @return {Object} The user list in the following format:
</span><span class="cm">  { id: INT, name: STRING, favouriteColour: STRING }
</span><span class="cm">*/</span>
<span class="kr">export</span> <span class="nx">async</span> <span class="kd">function</span> <span class="nx">fetchUserList</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">userList</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">_queryDBForUserList</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">await</span> <span class="nx">_formatUserList</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>We don’t explicitly test the  <code>_queryFBForUSerList</code> and <code>_formatUserList</code> functions as they are implementation details. If you were to change the type of database returning the user list, or the algorithm being used to format the user list you should not have to also modify your tests as the contract to your users has not changed. They still expect that if they call <code>fetchUserList</code> they will receive the list in the specified format.</p>
<h4 id="ui-example">UI Example</h4>
<p>Let’s take a look at a UI component this time using the React javascript library, in an effort to save space I’ve removed the functions that aren’t exported. This also helps to illustrate their irrelevance in our testing strategy.</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">LogIn</span> <span class="o">=</span> <span class="p">(</span><span class="p">{</span> <span class="nx">children</span> <span class="p">}</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">userIsLoggedIn</span> <span class="o">=</span> <span class="nx">useSelector</span><span class="p">(</span><span class="nx">isLoggedIn</span><span class="p">)</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">userIsConnecting</span> <span class="o">=</span> <span class="nx">useSelector</span><span class="p">(</span><span class="nx">isConnecting</span><span class="p">)</span><span class="p">;</span>

  <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">_generateButton</span><span class="p">(</span><span class="nx">userIsConnecting</span><span class="p">)</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">userIsLoggedIn</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;login&#34;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;login__logo&#34;</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">logo</span><span class="p">}</span> <span class="nx">alt</span><span class="o">=</span><span class="s2">&#34;logo&#34;</span> <span class="o">/</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">button</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/</span><span class="err">d</span><span class="err">i</span><span class="err">v</span><span class="err">&gt;</span>
        <span class="o">&lt;</span><span class="nx">main</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/</span><span class="err">m</span><span class="err">a</span><span class="err">i</span><span class="err">n</span><span class="err">&gt;</span>
      <span class="o">&lt;</span><span class="err">/</span><span class="err">&gt;</span>
    <span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">children</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>
</code></pre></div><p>This is a fairly simple component that renders a login button with a logo. Let’s go through the exercise and see what our User Contract is:</p>
<ul>
<li>If the user is not logged in
<ul>
<li>It renders a logo and button to log in.</li>
<li>It renders any children passed to it.</li>
<li>clicking the button logs in.</li>
</ul>
</li>
<li>If the user is logged in
<ul>
<li>It does not render a logo and button.</li>
<li>It renders any children passed to it.</li>
</ul>
</li>
</ul>
<p>Our tests would be:</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;LogIn&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;the user is not logged in&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;renders a logo and button to log in&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;renders any children passed to it&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;clicking the button logs in&#39;</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span><span class="p">)</span><span class="p">;</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;the user is logged in&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;does not render a logo and button to log in&#39;</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;renders any children passed to it&#39;</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>Testing the returned value in a UI component is a little more nuanced than checking a return value of a library function. We don’t necessarily want to check every specific detail of each element returned unless it’s part of the contract. I’ll expand these tests with assertions but eschew the component setup and rendering in interest of space.</p>
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;renders a logo and button to log in&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.login__logo&#39;</span><span class="p">)</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="p">;</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.login button&#39;</span><span class="p">)</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="p">;</span>
<span class="p">)</span><span class="p">;</span>
<span class="nx">it</span><span class="p">(</span><span class="s1">&#39;renders any children passed to it&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;main .items&#39;</span><span class="p">)</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="nx">it</span><span class="p">(</span><span class="s1">&#39;logs the user in&#39;</span><span class="p">,</span> <span class="p">(</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.login button&#39;</span><span class="p">)</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">{</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">useSelector</span><span class="p">(</span><span class="nx">isLoggedIn</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>It’s important to note here that we have tried to limit the specific details that aren’t relevant to the contract of the component. This allows the design to change and the contract to remain valid and we do not need to update the tests. This is especially beneficial when you have a shared component library within your company. You can update the designs and implementation details of your components without updating the tests.</p>
<h4 id="what-if-i">What if I&hellip;</h4>
<ul>
<li>&hellip;want to test that an api call is being made with the correct signature?
<ul>
<li>You should consider moving this sub api call into its own library and having it tested there. You'll then be testing the <strong>user contract</strong> of this new library, that a call to your api is making a specific call to another api.</li>
</ul>
</li>
<li>&hellip;have to mock out an api call?
<ul>
<li>You’ll find value in implementing a system that mocks out the layer which returns the data. In this layer it’ll return a pre-defined set of data depending on the arguments it receives. This way, if the arguments ever change and become invalid, it’ll no longer return the correctly formatted outcome and your tests will fail.</li>
</ul>
</li>
<li>&hellip;have a complex algorithm that needs testing?
<ul>
<li>Consider moving this to a separate library and test it separately so that the <strong>user contract</strong> of that library is being tested.</li>
</ul>
</li>
<li>&hellip;want to change the contract?
<ul>
<li>You can release a major version bump of your code. See how to use the <a href="https://fromanegg.com/post/2014/04/25/when-to-update-your-semver-version-number/">semver versioning system</a>.</li>
</ul>
</li>
</ul>
<h4 id="conclusion">Conclusion</h4>
<p>When writing the code and exporting methods, ask yourself if the user needs to have access to this method or if you’re only doing it for testing purposes. You can always export more methods, you can’t always take exported methods away.</p>
<p>When writing tests ask yourself how can the consumer interact with your code and what type of outcome is expected for those interactions and them make sure you have those documented and assertions in your tests.</p>
<p>Don't test implementation details of an exported method or UI component. Consider moving those to a different <strong>user contract</strong> if you feel they need direct testing.</p>
<h4 id="more-reading">More reading</h4>
<p>I have written some content many years ago which you may also find helpful:</p>
<ul>
<li><a href="https://fromanegg.com/post/2014/04/25/when-to-update-your-semver-version-number/">When to update your semver version number (2014)</a></li>
<li><a href="https://fromanegg.com/post/2014/03/13/self-documenting-code-is-not-enough/">Self documenting code is not enough (2014)</a></li>
<li><a href="https://fromanegg.com/post/2013/06/07/test-driven-development---the-easy-way/">Test driven development the easy way (2013)</a></li>
</ul>

  </article>
</section>

  
    <section class="article-list">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1><a href="https://fromanegg.com/post/2017/07/21/eliminating-missing-props-in-react-components/" itemprop="url">Eliminating missing props in React components</a></h1>
      
        <time pubdate content="2017-07-21 10:51:26 -0600 CST" datetime="2017-07-21 10:51:26 -0600 CST">21 July 2017</time>
      
    </header>
    <p>An advantage to components, React or otherwise, is that they can be used multiple times in various contexts across your application. As the application grows and components get modified over time the component call signatures can drift from their original spec and the many call locations across the application can miss getting updated. Compound that with shallow rendering unit tests and you’ve got yourself a problem where parts of your application don’t work as expected because of invalid data being sent to the components, not because the components are broken themselves.</p>
<p>This was an issue that we ran into a few times with the <a href="https://jujucharms.com/new">Juju GUI</a>. The Juju GUI is a web app with a large portion of it rendered using a number of parent React components which then render the appropriate children based on the state of the application.  When one of the children needs access to a method or data, it’s possible that it will need to be passed from the top application down through the parent and various children. This caused issues where it was easy to miss updating a components call signature when it was updated.</p>
<p>To remedy this, <a href="https://twitter.com/frankban_">Francesco Banconi</a>, one of my teammates wrote a <a href="https://github.com/juju/juju-gui/blob/develop/scripts/inspect-components">Python script</a> to analyze all of the components included in the application and their call signatures to ensure that every place it was being called, it was being called with the appropriate props.</p>
<p>We simply added this into our lint target in the Makefile so that CI will fail if a branch attempts to modify the call signatures without updated the rest of the application.</p>
<div class="highlight"><pre class="chroma"><code class="language-Makefile" data-lang="Makefile"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">lint</span>
<span class="nf">lint</span><span class="o">:</span> <span class="n">lint</span>-<span class="n">python</span> <span class="n">lint</span>-<span class="n">components</span> <span class="n">lint</span>-<span class="n">js</span> <span class="n">lint</span>-<span class="n">css</span>

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">lint</span>-<span class="n">components</span>
<span class="nf">lint-components</span><span class="o">:</span>
	 @./scripts/inspect-components validate --path jujugui/static/gui/src/ --short
</code></pre></div><p>The GUI is over 150k lines of code without dependencies and the script takes less than 300ms to run and outputs errors similar to the following allowing you to track them down quickly.</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">EntityContent:
  instantiated at: /juju-gui/jujugui/static/gui/src/app/components/entity-details/entity-details.js:98
  defined at: /juju-gui/jujugui/static/gui/src/app/components/entity-details/content/content.js:21
  entityModel provided but not declared

component validation failed: <span class="m">1</span> error found
</code></pre></div><p>We have found this hugely helpful to reduce errors in the shipped application with almost no overhead during development. Should we split this out into its own tool? Would you find this helpful in your own projects? Let me know <a href="https://twitter.com/fromanegg">@fromanegg</a> Thanks for reading.</p>

  </article>
</section>

  
    <section class="article-list">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1><a href="https://fromanegg.com/post/2016/11/22/how-to-semantic-blog-markup/" itemprop="url">How To: Semantic blog markup</a></h1>
      
        <time pubdate content="2016-11-22 21:23:26 -0600 CST" datetime="2016-11-22 21:23:26 -0600 CST">22 November 2016</time>
      
    </header>
    <p>After writing some great content you'll want people to be able to find it on the various search engines and easily share on social networks. This is done by using the proper HTML, microdata, and meta tags to allow search engines and social networks to correctly parse the content on your page and display the correct summary content.</p>
<p>You'll first want to start with the original description and canonical tags as the basic fallback for anything parsing your page. The <code>description</code> tag is the summary description of the content on the page. The <code>canonical</code> tag is to tell the search engines what the canonical url for your post is in the event they arrived there under a different url.</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;Description of post&#34;</span><span class="p"></span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;http://example.com/path/to/post&#34;</span><span class="p">/</span><span class="p">&gt;</span>
</code></pre></div><p>HTML5 brought with it a number of new tags which we can use to better organize our markup and tell search engines a little more about the organization of our pages. The two most important for blog posts are the <code>section</code> and <code>article</code> tags. The <code>section</code> tag represents a generic section of the document, like a list of articles. The <code>article</code> tag represents the actual post content including the title, publication date, content, etc.</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">section</span><span class="p"></span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">article</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">header</span><span class="p"></span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;permalink&#34;</span><span class="p"></span><span class="p">&gt;</span>Post Title<span class="p">&lt;</span><span class="p">/</span><span class="nt">a</span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">time</span> <span class="na">datetime</span><span class="o">=</span><span class="s">&#34;1970-01-01T00:00:00+00:00&#34;</span><span class="p"></span><span class="p">&gt;</span>January 1 1970<span class="p">&lt;</span><span class="p">/</span><span class="nt">time</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p"></span><span class="p">&gt;</span>Your name<span class="p">&lt;</span><span class="p">/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="p">/</span><span class="nt">header</span><span class="p">&gt;</span>
    Post content.
  <span class="p">&lt;</span><span class="p">/</span><span class="nt">article</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">section</span><span class="p">&gt;</span>
</code></pre></div><p>This doesn't however tell the search engines what elements contain things like the link, published date, title, content, etc. To do this we need to rely on <a href="https://www.w3.org/TR/microdata/">microdata</a> and <a href="http://schema.org/">schema.org</a> to fill in the blanks and describe the content in the markup.</p>
<p>Because this is a blog post we'll start by labeling the actual blog post. By adding <code>itemscope</code> to the article tag you're specifying that the content within the <code>article</code> tag is about a specific item, and the <code>itemtype</code> is the type of item you're wrapping. in this case, a <a href="http://schema.org/BlogPosting">BlogPosting</a> which has a list of sub tags that we can now define.</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">article</span> <span class="na">itemscope</span> <span class="na">itemtype</span><span class="o">=</span><span class="s">&#34;http://schema.org/BlogPosting&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">article</span><span class="p">&gt;</span>
</code></pre></div><p>The title is defined using the <a href="http://schema.org/name">name</a> tag and the permalink is defined using the <a href="http://schema.org/url">url</a> tag.</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;permalink&#34;</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&#34;url&#34;</span><span class="p"></span><span class="p">&gt;</span>Post Title<span class="p">&lt;</span><span class="p">/</span><span class="nt">a</span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">h1</span><span class="p">&gt;</span>
</code></pre></div><p>To indicate the date that the content was first published we use the <a href="http://schema.org/datePublished">datePublished</a> tag supplying the datetime value.</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">time</span> <span class="na">pubdate</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&#34;datePublished&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;1970-01-01T00:00:00+00:00&#34;</span> <span class="na">datetime</span><span class="o">=</span><span class="s">&#34;1970-01-01T00:00:00+00:00&#34;</span><span class="p"></span><span class="p">&gt;</span>January 1 1970<span class="p">&lt;</span><span class="p">/</span><span class="nt">time</span><span class="p">&gt;</span>
</code></pre></div><p>the <code>author</code> has a number of various implementations including one in HTML5, the <code>rel</code> tag. In microdata it's the <a href="http://schema.org/author">author</a> tag.</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&#34;author&#34;</span><span class="p"></span><span class="p">&gt;</span>Your name<span class="p">&lt;</span><span class="p">/</span><span class="nt">span</span><span class="p">&gt;</span>
</code></pre></div><p>Now moving beyond the microdata and schema.org definitions, to enable the best sharing experience on the social networks you'll want to set up <a href="https://dev.twitter.com/cards/types/summary">Twitter cards</a> and <a href="https://developers.facebook.com/docs/sharing/webmasters">Facebook Open Graph data</a>.</p>
<p>The Twitter card metadata fields are as follows (taken from their documentation):</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:card&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;summary&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:site&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;@flickr&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:title&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;Small Island Developing States Photo Submission&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;View the album on Flickr.&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:image&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;https://farm6.staticflickr.com/5510/14338202952_93595258ff_z.jpg&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
</code></pre></div><p>And the Facebook Open Graph data meta fields are (taken from their documentation):</p>
<div class="highlight"><pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:url&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;http://www.example.com/post/1234&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;article&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:title&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;When Great Minds Don’t Think Alike&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;How much does culture influence creative thinking?&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:image&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;http://example.com/image.jpg&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;article:published_time&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;1970-01-01T00:00:00+00:00&#34;</span><span class="p"></span><span class="p">&gt;</span>
</code></pre></div><p>Thanks for reading, do you have any other tips for proper blog markup? Let me know below!</p>

  </article>
</section>

  
    <section class="article-list">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1><a href="https://fromanegg.com/post/2016/11/13/secure-github-pages-with-ssl-tls/" itemprop="url">Secure GitHub pages with SSL/TLS</a></h1>
      
        <time pubdate content="2016-11-13 18:19:00 -0600 CST" datetime="2016-11-13 18:19:00 -0600 CST">13 November 2016</time>
      
    </header>
    <p>At the time of writing, this blog is hosted on GitHub and they do not support serving https on custom domains. But because there are many reasons why every website should be hosted under https this guide will show you how I got https for this blog on GitHub.</p>
<p>First you'll need a couple things:</p>
<ul>
<li>A website hosted on <a href="https://pages.github.com/">GitHub Pages</a> with a custom domain.</li>
<li>An account with <a href="https://www.cloudflare.com/">Cloudflare</a>.</li>
</ul>
<p>Then follow these steps:</p>
<ol>
<li>After signing up with Cloudflare you'll be prompted to add your domain, at which point it'll scan your DNS records automatically. You'll want to make sure that it has all of them and that they are correct by cross referencing them with your current DNS provider.</li>
<li>Switch to the Crypto tab and change the <code>SSL type</code> to <code>Flexible</code>.</li>
<li>Update the Nameservers at your domain registrar to point to the ones provided by Cloudflare in your setup steps.</li>
<li>Redirect all of your http traffic to https traffic using Cloudflare by adding a <code>Page Rule</code>. You'll want to add a rule which looks like <code>http://*example.com/*</code> and then add a setting for <code>Always Use HTTPS</code>. After clicking Save and Deploy all requests to the http version of your site will be 301 redirected to the https version of your site. <a href="https://support.cloudflare.com/hc/en-us/articles/200170536-How-do-I-redirect-all-visitors-to-HTTPS-SSL-">Cloudflare knowledge base</a></li>
<li>Set up a canonical url on each page so that web crawlers will know that any path which gets the user to the site that the canonical url is the primary path that should be stored. To do that add <code>&lt;link rel=&quot;canonical&quot; href=&quot;http://example.com/path/to/post&quot;/&gt;</code> to the head of each page.</li>
<li>Update the paths for your assets so that they are requested from the https path or browsers won't load them.</li>
</ol>
<p>Once the DNS records propagate you'll be able to visit your website by visiting <code>https://example.com</code>. You might notice that you'll still be using the github.com certificate for a bit still, I found that it took a few hours for a new certificate to be issued from Cloudflare.</p>
<p>The one caveat here is that the connection between Cloudflare and GitHub is not under https. However these steps will still protect your users from an unscrupulous ISP and users at coffee shops. But as GitHub themselves say &ldquo;<a href="https://help.github.com/articles/what-is-github-pages/">GitHub Pages sites shouldn't be used for sensitive transactions like sending passwords or credit card numbers.</a>&rdquo; anyways.</p>
<p>I hope you enjoyed this post, if you have any questions or comments let me know on Twitter <a href="https://twitter.com/fromanegg">@fromanegg</a> or comment below. Thanks for reading!</p>

  </article>
</section>

  
    <section class="article-list">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1><a href="https://fromanegg.com/post/2016/11/12/welcome-to-from-an-egg-v2/" itemprop="url">Welcome to From An Egg v2</a></h1>
      
        <time pubdate content="2016-11-12 16:49:53 -0600 CST" datetime="2016-11-12 16:49:53 -0600 CST">12 November 2016</time>
      
    </header>
    <p>Welcome to v2 of the From An Egg blog!</p>
<p>Built with <a href="https://gohugo.io">Hugo</a>, a static site generator built with <a href="https://golang.org/">Go</a>, v2 is considerably faster and nicer to look at than its v1 counterpart which was hosted by Tumblr. This new version is also being served over HTTPS and I'll be releasing the theme sometime in the future. Thanks for stopping by!</p>

  </article>
</section>

  
  

<ul class="pagination">
    
    <li class="page-item">
        <a href="/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item disabled">
    <a  class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item disabled"><span aria-hidden="true">&nbsp;&hellip;&nbsp;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/page/14/">14</a></li>
    
    
    <li class="page-item">
    <a href="/page/2/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/page/14/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28934249-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>

